(function(){var N=Object.create||function(a){return{__proto__:a}};var sb=Math.imul||function(a,b){return (a*(b>>>16)<<16)+a*(b&65535)|0};var ha;function ma(a,b){return a-b*Math.floor(a/b)}function Pa(a){return a!=0&&(a&a-1)==0}function Q(a,b){a.width=a.height=b*window.devicePixelRatio|0,a.style.width=a.style.height=b+'px'}function q(a,b,c){var d=a.getElementsByClassName(b)[0];return Q(d,c),d}function G(a,b){var c=null;try{c=new Jb(a,b)}catch(d){document.getElementById('demo-page').style.display='none',document.getElementById('webgl-error').style.display=null;throw d}return c}function Ua(a){var b=q(a,'input-canvas',256),c=q(a,'output-canvas',256),d=new Kb,f=G(c,d);new Mb(b,c,function(){E(f,b,new Float32Array([0,0,0,0])),J(f),P(f)})}function Va(a){var b=q(a,'input-canvas',256),c=q(a,'output-canvas',256),d=new Kb;d.a=!0;var f=G(c,d);new Ob(b,c,function(){E(f,b,new Float32Array([0,0,0,0])),J(f),P(f)})}function Wa(a){var b=q(a,'input-canvas',256),c=q(a,'output-canvas',256),d=new Kb,f=G(c,d);new Ub(b,c,function(e){E(f,
e.d,new Float32Array([0,0,0,0])),J(f),P(f)})}function Xa(a){var b=q(a,'input-canvas',256),c=q(a,'output-canvas',256),d=new Kb;d.a=!0;var f=G(c,d);new Ob(b,c,function(){E(f,b,new Float32Array([0,0,0,0])),J(f),Qa(f)})}function Ya(a){var b=q(a,'output-canvas',256);p(b).scale(window.devicePixelRatio,window.devicePixelRatio),new Vb(256,b,a.getElementsByClassName('shadow-spread-slider')[0],a.getElementsByClassName('shadow-blur-slider')[0])}function Za(a){var b=q(a,'input-canvas',256),c=q(a,'output-canvas',256),d=new Kb,f=G(c,d),e=a.getElementsByClassName('jfa-round-label')[0],h=a.getElementsByClassName('jfa-round-slider')[0],g=Math.log2(256)+1|0;noUiSlider.create(h,r(r(r(N(null),'start',g),'step',1),'range',{min:1,max:g}));var i=function(l){e.textContent='Round #'+(h.noUiSlider.get()|0),E(f,b,new Float32Array([0,0,0,0])),Sa(f);for(var o=0;o<l;o=o+1|0)f.L();P(f)};h.noUiSlider.on('slide',function(){i(h.noUiSlider.get()|0)}),new Mb(b,c,function(){i(h.noUiSlider.get()|0)}),i(g)}function _a(a){var b=a.getElementsByTagName('canvas')[0];
Q(b,256);var c=new Pb(b,256,16),d=a.getElementsByClassName('step-size-slider')[0],f=a.getElementsByClassName('step-size-label')[0],e=Math.log2(16)-1|0;noUiSlider.create(d,r(r(r(N(null),'start',0),'step',1),'range',{min:0,max:e}));var h=function(g){var i=fa(g,16);f.textContent='JFA round '+g+', step length is '+i},l=function(o){h(o),c.f.b=o},k=function(s){h(s)},w=!1;d.noUiSlider.on('start',function(){w=!0}),d.noUiSlider.on('end',function(){l(d.noUiSlider.get()|0),w=!1}),d.noUiSlider.on('slide',function(){l(d.noUiSlider.get()|0)}),c.e=function(){w||(k(c.f.b),d.noUiSlider.set(c.f.b))},k(0)}function Lb(){v(window,'load',function(){Ua(document.getElementById('paint-demo-container')),Va(document.getElementById('fish-demo-container')),Wa(document.getElementById('photo-demo-container')),_a(document.getElementById('jfa-pattern-demo-container')),Za(document.getElementById('slider-demo-container')),Xa(document.getElementById('distance-demo-container')),Ya(document.getElementById('shadow-demo-container'))})}function Ca(a){
var b=a.getBoundingClientRect();return b.bottom>-1&&b.right>-1&&b.top<=window.innerHeight&&b.left<=window.innerWidth}function ia(a,b){var c=null,d=function(){if(Ca(a)){var f=new Date,e=c?+f-+c:1/30;b(e),c=f}requestAnimationFrame(d)};requestAnimationFrame(d)}function y(a){return 'rgba('+(a.a*255|0)+', '+(a.b*255|0)+', '+(a.c*255|0)+', '+a.d+')'}function m(a){return new tb((a>>16&255)/255,(a>>8&255)/255,(a&255)/255,1)}function U(a){a.b?a.b.stopPropagation():a.c.stopPropagation()}function V(a){return a.b?a.b.target:a.c.target}function j(c){var a=V(c).getBoundingClientRect(),b=null;return b=c.b?new Bb(c.b.clientX,c.b.clientY):new Bb(ba(c.c.touches)[0].clientX,ba(c.c.touches)[0].clientY),n(b,new Bb(a.left,a.top))}function t(i,a){v(a,'mousedown',function(b){ja(i,new ub(i,b,null)),B(b)}),v(a,'mousemove',function(c){ka(i,new ub(i,c,null)),B(c)}),v(a,'mouseup',function(d){W(i,new ub(i,d,null)),B(d)}),v(a,'mouseleave',function(f){W(i,new ub(i,f,null)),B(f)}),v(a,'touchstart',function(e){ja(i,new ub(i,null,e)),B(e)}),v(a,
'touchmove',function(h){ka(i,new ub(i,null,h)),B(h)}),v(a,'touchend',function(g){W(i,new ub(i,null,g)),B(g)})}function ja(c,a){for(var d=0,f=c.a,e=f.length;d<e;d=d+1|0){var b=f[d];b.ya(a)}}function W(c,a){for(var d=0,f=c.a,e=f.length;d<e;d=d+1|0){var b=f[d];b.Aa(a)}}function ka(c,a){for(var d=0,f=c.a,e=f.length;d<e;d=d+1|0){var b=f[d];b.za(a)}}function X(c,a,b){c.c=n(a,c.b),c.d&&c.d(b)}function la(b,a){a.beginPath(),a.rect(b.a.a-(b.b/2|0)|0,b.a.b-(b.b/2|0)|0,b.b,b.b),a.fillStyle=y(b.c),a.fill(),a.closePath()}function Y(a){return new Bb(a.a,a.b)}function na(b,a){return new Bb(b.a+a.a,b.b+a.b)}function n(b,a){return new Bb(b.a-a.a,b.b-a.b)}function Ea(b,a){return new Bb(b.a-a,b.b-a)}function oa(b,a){return new Bb(b.a*a,b.b*a)}function H(b,a){return new Bb(b.a/a,b.b/a)}function Z(b,a){b.a+=a.a,b.b+=a.b}function Fa(b,a){b.a=ma(b.a,a.a),b.b=ma(b.b,a.b)}function Ga(b,a){b.a*=a,b.b*=a}function Ha(b,a){return new Bb(b.a*Math.cos(a)-b.b*Math.sin(a),b.b*Math.cos(a)+b.a*Math.sin(a))}function Ia(a){return H(a,z(a))}function Ja(a){
return Math.atan2(a.b,a.a)}function z(a){return Math.sqrt(a.a*a.a+a.b*a.b)}function pa(d,a,b){var c=d.a.createShader(a);if(d.a.shaderSource(c,b),d.a.compileShader(c),!d.a.getShaderParameter(c,35713)){console.error(d.a.getShaderInfoLog(c));throw new Error('Failed to create shader')}return c}function C(a){return a.a.useProgram(a.b),a}function u(d,a,b){var c=$(d,a);return d.a.uniform1i(c,b),d}function _(d,a,b){var c=$(d,a);return d.a.uniform1f(c,b),d}function x(d,a,b){var c=$(d,a);if(b.length^2){if(b.length^3){if(b.length^4)throw new Error('Invalid size of value: '+b.length);else d.a.uniform4fv(c,b)}else d.a.uniform3fv(c,b)}else d.a.uniform2fv(c,b);return d}function D(e,a,b,c,d){var f=Ka(e,a);return qa(b),e.a.enableVertexAttribArray(f),e.a.vertexAttribPointer(f,c,5126,!1,d,0),e}function Ka(b,a){return a in b.d||(b.d[a]=b.a.getAttribLocation(b.b,a)),b.d[a]}function $(b,a){return a in b.c||(b.c[a]=b.a.getUniformLocation(b.b,a)),b.c[a]}function qa(a){a.a.bindBuffer(a.c,a.b)}function La(c,a,b){qa(c),c.d^a.byteLength?(c.a.bufferData(c.c,
a,b),c.d=a.byteLength):c.a.bufferSubData(c.c,0,a)}function Ma(a){return new Fb(a,a.createFramebuffer())}function ra(a){a.a.bindFramebuffer(36160,a.b)}function I(b,a){ra(b),b.a.framebufferTexture2D(36160,36064,3553,a.c,0)}function Na(a){return new Gb(a.a,a.b,a.c,a.d,a.f)}function aa(a){a.a.bindTexture(3553,a.c)}function A(b,a){b.a.activeTexture(33984+a),aa(b)}function O(c,a,b){aa(c),c.a.texImage2D(3553,0,c.b.b,a,b,0,c.b.b,c.b.f,null)}function sa(b,a){aa(b),b.a.texImage2D(3553,0,b.b.b,b.b.b,b.b.f,a)}function E(c,a,b){c.T=a,I(c.K,c.o),sa(c.s,a),A(c.s,0),c.b.a.viewport(0,0,c.c,c.c),x(x(u(D(C(c.d),'quad',c.l,2,0),'iSeedInputTexture',0),'iGridSize',new Float32Array([c.c,c.c])),'iBackgroundColor',b).a.drawArrays(5,0,4)}function P(a){I(a.K,a.w),sa(a.s,a.T),A(a.s,0),A(a.k,1),a.b.a.viewport(0,0,a.c,a.c),_(x(u(u(D(C(a.e),'quad',a.l,2,0),'iSeedInputTexture',0),'iCellGridTexture',1),'iGridSize',new Float32Array([a.c,a.c])),'iMinSeedDistanceThreshold',a.a.b*window.devicePixelRatio).a.drawArrays(5,0,4),ca(a)}function Qa(a){I(a.K,
a.w),A(a.k,0),a.b.a.viewport(0,0,a.c,a.c),x(u(D(C(a.h),'quad',a.l,2,0),'iCellGridTexture',0),'iGridSize',new Float32Array([a.c,a.c])).a.drawArrays(5,0,4),ca(a)}function Ra(c,a,b){I(c.K,c.w),A(c.k,0),c.b.a.viewport(0,0,c.c,c.c),x(_(_(x(u(D(C(c.g),'quad',c.l,2,0),'iCellGridTexture',0),'iGridSize',new Float32Array([c.c,c.c])),'iShadowSpread',a),'iShadowBlur',b),'iShadowColor',new Float32Array([.7,.7,.7,1])).a.drawArrays(5,0,4),ca(c)}function ca(a){ra(a.b.b),A(a.w,0),a.b.a.viewport(0,0,a.M.width,a.M.height),x(u(D(C(a.i),'quad',a.l,2,0),'iTexture',0),'iResolution',new Float32Array([a.M.width,a.M.height])).a.drawArrays(5,0,4)}function J(b){for(var a=b.c/2|0;a>0;)F(b,a),a=a/2|0;F(b,2),F(b,1)}function Sa(b){var a=b.c/2|0;b.L=function(){a>=1?(F(b,a|0),a/=2):a<1&&(F(b,2),F(b,1))}}function F(b,a){I(b.K,b.k),A(b.o,0),b.b.a.viewport(0,0,b.c,b.c),u(x(u(u(D(C(b.f),'quad',b.l,2,0),'iCellGridTexture',0),'iStepSize',a),'iCellGridSize',new Float32Array([b.c,b.c])),'iUseTorusDistanceForSeeds',b.a.a?1:0).a.drawArrays(5,0,4),Ta(b)}
function Ta(b){var a=b.o;b.o=b.k,b.k=a}function da(d,a){var b=d.a.getBoundingClientRect();if(a.a>0&&a.b>0&&a.a<b.width&&a.b<b.height){var c=new tb(.5+Math.random()*.4,.2,.3+Math.random()*.5,1);d.c.beginPath(),d.c.rect(a.a-1|0,a.b-1|0,2,2),d.c.fillStyle=y(c),d.c.fill(),d.d&&d.d()}}function $a(){var a=document.createElement('canvas'),b=p(a);b.clearRect(0,0,a.width,a.height),b.font='60px Baskerville';var c=b.measureText('Voronoi').width;return a.width=Math.round(c)*window.devicePixelRatio|0,a.height=window.devicePixelRatio*60|0,b.scale(window.devicePixelRatio,window.devicePixelRatio),b.font='60px Baskerville',b.fillStyle='#333',b.textBaseline='hanging',b.fillText('Voronoi',0,0),a}function ea(b,a){b.d.fillStyle='white',b.d.fillRect(0,0,b.f,b.f),ta(b,b.d,a),b.l&&b.l()}function ta(c,a,b){a.drawImage(c.a,b.a,b.b,c.a.width/window.devicePixelRatio,c.a.height/window.devicePixelRatio)}function bb(b){ia(b.a,function(a){cb(b,a)})}function cb(g,a){var b=a/1000,c=g.a.getBoundingClientRect();g.c.clearRect(0,0,c.width,c.height);
for(var d=1,l=g.e.length;d<l;d=d+1|0){var f=g.e[d];f.a.a+=g.h[d]*b,f.a.b-=g.h[d]*b;for(var e=1,i=g.e.length;e<i;e=e+1|0)d^e&&z(n(f.a,g.e[e].a))<40&&Z(f.a,oa(oa(Ia(n(f.a,g.e[e].a)),b),5));Fa(f.a,new Bb(c.width,c.height))}for(var o=0,k=g.e,s=k.length;o<s;o=o+1|0){var h=k[o];la(h,g.c)}la(g.g,g.c),g.d&&g.d()}function db(a){return new Rb(a.a,a.b)}function fa(a,b){if(a<0||a==Math.log2(b))throw new Error(a+' is not a valid round for JFA gridSize '+b);return b/Ba(2,a+1|0)|0}function eb(a,b,c){var d=Math.atan2(c.b-b.b|0,c.a-b.a|0);a.moveTo(b.a,b.b),a.lineTo(c.a,c.b),a.stroke();var f=new Bb(c.a-Math.cos(d-.5235987755982988)*10,c.b-Math.sin(d-.5235987755982988)*10),e=new Bb(c.a-Math.cos(d+.5235987755982988)*10,c.b-Math.sin(d+.5235987755982988)*10);a.beginPath(),a.moveTo(c.a,c.b),a.lineTo(f.a,f.b),a.lineTo(e.a,e.b),a.fill()}function fb(c,a){var b=db(a);return b.a.a=b.a.a+1|0,b.a.a^c.b||(b.a.a=0,b.a.b=b.a.b+1|0),b.a.b^c.b||(b.a.b=0,b.b=(b.b+1|0)%Math.log2(c.b)|0),b}function R(a){return a.c/a.b|0}function gb(d,a){if(d.h+=a,
d.h>100){d.h=0;var b=d.f.b;d.f=fb(d,d.f),b^d.f.b&&d.e&&d.e();var c=p(d.a);c.clearRect(0,0,d.c,d.c),hb(d,c),ib(d,c),jb(d,c)}}function hb(f,a){var b=R(f);a.beginPath(),a.lineWidth=1;for(var c=0,e=f.b+1|0;c<e;c=c+1|0)a.moveTo(0,sb(b,c)),a.lineTo(f.c,sb(b,c));for(var d=0,h=f.b+1|0;d<h;d=d+1|0)a.moveTo(sb(b,d),0),a.lineTo(sb(b,d),f.c);a.strokeStyle=y(ob),a.stroke(),a.beginPath(),a.rect(0,0,f.c-1|0,f.c-1|0),a.strokeStyle=y(pb),a.stroke()}function ib(g,a){var b=R(g);a.beginPath(),a.rect(sb(g.f.a.a,b),sb(g.f.a.b,b),b,b),a.strokeStyle=y(Da),a.stroke(),a.beginPath(),a.lineWidth=1,a.strokeStyle=y(qb);for(var c=fa(g.f.b,g.b),k=0,s=[-c|0,0,c],w=s.length;k<w;k=k+1|0)for(var d=s[k],i=0,l=[-c|0,0,c],o=l.length;i<o;i=i+1|0){var f=l[i],e=g.f.a.a+d|0,h=g.f.a.b+f|0;a.rect(sb(e,b)+1|0,sb(h,b)+1|0,b-2|0,b-2|0)}a.stroke()}function jb(k,a){var b=fa(k.f.b,k.b),c=R(k);a.beginPath(),a.lineWidth=1,a.strokeStyle=y(Da),a.fillStyle='white';for(var L=0,T=[-b|0,0,b],M=T.length;L<M;L=L+1|0)for(var d=T[L],s=0,w=[-b|0,0,b],K=w.length;s<K;s=s+1|0){
var f=w[s];if(d||f){var e=k.f.a.a+d|0,h=k.f.a.b+f|0,g=sb(e,c),i=sb(h,c),l=d^-b?d?c:c/2|0:0,o=f^-b?f?c:c/2|0:0;eb(a,new Qb(sb(k.f.a.a,c)+l|0,sb(k.f.a.b,c)+o|0),new Qb(g+(c/2|0)|0,i+(c/2|0)|0))}}}function ua(d){nb(d.a);for(var a=Ja(n(d.d,d.f)),f=0,e=d.b,h=e.length;f<h;f=f+1|0){var b=e[f],c=Y(b);Ga(c,Math.max(z(n(d.f,d.d))/50*2,.5)),c=Ha(c,a),Z(c,d.f),kb(d,c)}ga(d),d.a.g(d.a)}function ga(h){var a=h.a.c,b=h.d,c=h.f;a.beginPath(),a.lineWidth=1,a.moveTo(b.a|0,b.b|0),a.lineTo(c.a|0,c.b|0),a.strokeStyle='#A5A3A3',a.stroke();var d='#46C9FF',f='#46C9FF';z(n(h.e,h.d))<10?f=h.c?'#0F86B7':'#ACE7FF':z(n(h.e,h.f))<12&&(d=h.c?'#0F86B7':'#ACE7FF'),a.beginPath(),a.arc(c.a,c.b,6,0,6.283185307179586),a.fillStyle='#FFF',a.fill(),a.lineWidth=2,a.strokeStyle=d,a.stroke();var e=Ea(b,4);a.beginPath(),a.rect(e.a,e.b,8,8),a.fillStyle='#FFF',a.fill(),a.lineWidth=2,a.strokeStyle=f,a.stroke()}function va(c,a){switch(c.c.a){case 0:var b=n(c.d,c.f);c.f=j(a),c.d=na(c.f,b);break;case 1:c.d=j(a);break}ua(c)}function kb(c,a){var b=c.a.a.getBoundingClientRect().width;
a.a>0&&a.b>0&&a.a<b&&a.b<b&&wa(c.a,a)}function lb(f,a,b,c,d){a.fillStyle=c,mb(f,a,b,d)}function mb(d,a,b,c){a.beginPath(),a.rect(b.a|0,b.b|0,c,c),a.fill()}function nb(b){var a=b.a.getBoundingClientRect();b.c.clearRect(0,0,a.width,a.height),b.f.clearRect(0,0,b.d.width,b.d.height)}function wa(b,a){lb(b,b.c,a,'rgba(255, 255, 255, 0.7)',2),b.f.fillStyle=b.h,b.f.beginPath(),b.f.rect(a.a*window.devicePixelRatio|0,a.b*window.devicePixelRatio|0,1,1),b.f.fill()}function S(c){var a=c.c.a.noUiSlider.get(),b=c.d.a.noUiSlider.get();E(c.g,c.f,new Float32Array([1,1,1,1])),J(c.g),Ra(c.g,a,b),c.h.fillStyle='white',c.h.fillRect(0,0,c.b.width,c.b.height),c.h.drawImage(c.e,0,0,c.b.width/window.devicePixelRatio,c.b.height/window.devicePixelRatio),ta(c.i,c.h,c.i.h)}function ba(a){for(var b=[],c=0,d=a.length;c<d;c=c+1|0)b.push(a[c]);return b}function v(a,b,c){a.addEventListener(b,c)}function B(a){a.preventDefault()}function Ba(d,a){for(var b=d,c=a<0?0:1;a>0;)a&1&&(c=sb(c,b)),a>>=1,b=sb(b,b);return c}function r(c,a,b){return c[a]=b,c}
function p(a){try{return a.getContext('2d')}catch(b){}return null}function Oa(a){try{return a.getContext('webgl')}catch(b){}try{return a.getContext('experimental-webgl')}catch(c){}return null}function tb(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function ub(a,b,c){this.a=a,this.b=b,this.c=c}function vb(a,b,c){this.a=a,this.b=b,this.c=c}ha=vb.prototype;ha.ya=function(a){this.a&&this.a(a)};ha.za=function(a){this.b&&this.b(a)};ha.Aa=function(a){this.c&&this.c(a)};function wb(a){this.a=a}function xb(){var d=this;d.a=new wb(!1),v(window,'load',function(){var a=function(){d.a.a=!0},b=function(){d.a.a=!1};document.addEventListener('mousedown',a,!0),document.addEventListener('mouseup',b),document.addEventListener('touchstart',a),document.addEventListener('touchend',b),document.addEventListener('mouseout',function(c){!c.toElement&&!c.relatedTarget&&b()})})}function yb(){this.a=[]}function zb(a){this.b=this.c=this.d=null,this.a=a}ha=zb.prototype;ha.ya=function(a){this.a.style.cursor='move',this.b=j(a),X(this,j(a),0)};
ha.za=function(a){this.a.style.cursor=new wb(xa.a.a).a?'move':null,this.b&&X(this,j(a),0)};ha.Aa=function(a){this.b&&(X(this,j(a),1),this.b=null),this.a.style.cursor=null};function Ab(a){this.a=a,this.b=2,this.c=new tb(0,0,1,1)}function Bb(a,b){this.a=a,this.b=b}function Cb(a){this.a=this.b=null,this.a=Oa(a),this.b=new Fb(this.a,null)}function Ib(a,b){this.a=a,noUiSlider.create(a,b)}function Jb(a,b){if(this.a=this.b=null,this.c=0,this.d=this.f=this.e=this.h=this.g=this.i=this.l=this.o=this.k=this.s=this.w=this.K=this.L=this.T=this.M=null,a.width^a.height)throw new Error('Voronoi canvas parameter must be square. Size is ('+a.width+', '+a.height+')');if(!Pa(a.width))throw new Error('Voronoi canvas size must be a power of two. Size is '+a.width);if(this.a=b,this.c=a.width,this.M=a,this.b=new Cb(a),!this.b.a)throw new Error('Failed to initialize Wham');this.b.a.disable(2929);var c=this.b.a;c.disable(2929),this.f=new Db(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n',
'precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture;\nuniform vec2 iCellGridSize;\nuniform int iStepSize;\nuniform bool iUseTorusDistanceForSeeds;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\n\nint y(int a, int b) {\n  return int(mod(float(a), float(b)));\n}\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nivec2 s(int a) {\n  return ivec2(a / 256, y(a, 256));\n}\n\nbool t(vec2 a) {\n  return a.x >= 0.0 && a.y >= 0.0 && a.x <= 1.0 && a.y <= 1.0;\n}\n\nvec4 v(const ivec2 a) {\n  ivec2 b = s(a.x), c = s(a.y);\n  return vec4(vec2(b) / 255.0, vec2(c) / 255.0);\n}\n\nvec4 x() {\n  return v(ivec2(21000, 21000));\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nbool r(const vec4 a) {\n  vec2 b = g(a);\n  return b.x < 2e+4;\n}\n\nfloat o(vec2 a, vec2 b, vec2 c) {\n  float d = min(abs(a.x - b.x), c.x - abs(a.x - b.x)), e = min(abs(a.y - b.y), c.y - abs(a.y - b.y));\n  return sqrt(d * d + e * e);\n}\n\nvec4 h(const vec4 b, const vec2 u) {\n  vec2 c = (gl_FragCoord.xy + u) / iCellGridSize;\n  vec4 a = texture2D(iCellGridTexture, c);\n  a = !t(c) && !iUseTorusDistanceForSeeds ? x() : a;\n  if (!r(a))\n    return b;\n  else if (!r(b))\n    return a;\n  else {\n    vec2 d = g(b), e = g(a);\n    float A = iUseTorusDistanceForSeeds ? o(d, gl_FragCoord.xy, iCellGridSize) : distance(d, gl_FragCoord.xy), B = iUseTorusDistanceForSeeds ? o(e, gl_FragCoord.xy, iCellGridSize) : distance(e, gl_FragCoord.xy);\n    if (A > B)\n      return a;\n  }\n  return b;\n}\n\nvoid main() {\n  vec2 b = gl_FragCoord.xy / iCellGridSize;\n  vec4 a = texture2D(iCellGridTexture, b);\n  a = h(a, vec2(0, iStepSize)), a = h(a, vec2(iStepSize, iStepSize)), a = h(a, vec2(iStepSize, 0)), a = h(a, vec2(iStepSize, -iStepSize)), a = h(a, vec2(0, -iStepSize)), a = h(a, vec2(-iStepSize, -iStepSize)), a = h(a, vec2(-iStepSize, 0)), a = h(a, vec2(-iStepSize, iStepSize)), gl_FragColor = a;\n}\n'),
this.d=new Db(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iSeedInputTexture;\nuniform vec2 iGridSize;\nuniform vec4 iBackgroundColor;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\n\nint y(int a, int b) {\n  return int(mod(float(a), float(b)));\n}\n\nivec2 s(int a) {\n  return ivec2(a / 256, y(a, 256));\n}\n\nbool w(float a, float b) {\n  return abs(a - b) < 1e-4;\n}\n\nbool z(vec4 a, vec4 b) {\n  return w(a.x, b.x) && w(a.y, b.y) && w(a.z, b.z) && w(a.w, b.w);\n}\n\nvec4 v(const ivec2 a) {\n  ivec2 b = s(a.x), c = s(a.y);\n  return vec4(vec2(b) / 255.0, vec2(c) / 255.0);\n}\n\nvec4 x() {\n  return v(ivec2(21000, 21000));\n}\n\nvoid main() {\n  vec2 a = gl_FragCoord.xy / iGridSize, b = vec2(a.x, 1.0 - a.y);\n  vec4 c = texture2D(iSeedInputTexture, b);\n  gl_FragColor = z(c, iBackgroundColor) ? x() : v(ivec2(gl_FragCoord.xy));\n}\n'),
this.i=new Db(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iInputTexture;\nuniform vec2 iResolution;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\n\nvoid main() {\n  vec2 a = gl_FragCoord.xy / iResolution;\n  gl_FragColor = texture2D(iInputTexture, a);\n}\n'),this.e=new Db(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n',
'precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture, iSeedInputTexture;\nuniform vec2 iGridSize;\nuniform float iMinSeedDistanceThreshold;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nbool r(const vec4 a) {\n  vec2 b = g(a);\n  return b.x < 2e+4;\n}\n\nfloat o(vec2 a, vec2 b, vec2 c) {\n  float d = min(abs(a.x - b.x), c.x - abs(a.x - b.x)), e = min(abs(a.y - b.y), c.y - abs(a.y - b.y));\n  return sqrt(d * d + e * e);\n}\n\nvoid main() {\n  vec2 d = gl_FragCoord.xy / iGridSize;\n  vec4 a = texture2D(iCellGridTexture, d);\n  vec2 b = g(a) + vec2(0.5);\n  float e = o(b, gl_FragCoord.xy, iGridSize);\n  if (r(a) && iMinSeedDistanceThreshold < 0.0 || e < iMinSeedDistanceThreshold) {\n    vec2 c = b / iGridSize, u = vec2(c.x, 1.0 - c.y);\n    gl_FragColor = texture2D(iSeedInputTexture, u);\n  }\n  else\n    gl_FragColor = r(a) ? j : k;\n}\n'),
this.h=new Db(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture;\nuniform vec2 iGridSize;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nbool t(vec2 a) {\n  return a.x >= 0.0 && a.y >= 0.0 && a.x <= 1.0 && a.y <= 1.0;\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nfloat o(vec2 a, vec2 b, vec2 c) {\n  float d = min(abs(a.x - b.x), c.x - abs(a.x - b.x)), e = min(abs(a.y - b.y), c.y - abs(a.y - b.y));\n  return sqrt(d * d + e * e);\n}\n\nvoid main() {\n  vec2 b = gl_FragCoord.xy / iGridSize;\n  if (!t(b)) {\n    gl_FragColor = i;\n    return;\n  }\n  vec4 c = texture2D(iCellGridTexture, b);\n  vec2 d = g(c);\n  float a = o(d, gl_FragCoord.xy, iGridSize);\n  a = 1.0 - a / (iGridSize.x * 0.5), gl_FragColor = vec4(a, a, a, 1.0);\n}\n'),
this.g=new Db(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture;\nuniform vec2 iGridSize;\nuniform float iShadowSpread, iShadowBlur;\nuniform vec4 iShadowColor;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), q = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), n = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), l = vec4(1.0, 1.0, 0.0, 1.0), j = vec4(0.0, 0.0, 0.0, 1.0), k = vec4(1.0, 1.0, 1.0, 1.0);\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nbool t(vec2 a) {\n  return a.x >= 0.0 && a.y >= 0.0 && a.x <= 1.0 && a.y <= 1.0;\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nvoid main() {\n  vec2 a = gl_FragCoord.xy / iGridSize;\n  if (!t(a)) {\n    gl_FragColor = i;\n    return;\n  }\n  vec4 b = texture2D(iCellGridTexture, a);\n  vec2 c = g(b);\n  float d = distance(c, gl_FragCoord.xy), e = iShadowSpread - iShadowBlur / 2.0, u = clamp((d - e) / iShadowBlur, 0.0, 1.0);\n  gl_FragColor = mix(iShadowColor, vec4(0.0), u);\n}\n'),
this.l=new Eb(c),La(this.l,rb,35044);var d=new Gb(c,6408,10497,9728,5121);this.o=new Hb(c,d),O(this.o,this.c,this.c),this.k=new Hb(c,d),O(this.k,this.c,this.c),d=new Gb(c,6408,10497,9729,5121),this.w=new Hb(c,d),O(this.w,this.c,this.c),d=new Gb(c,6408,10497,9728,5121),this.s=new Hb(c,d),O(this.s,this.c,this.c),this.K=Ma(c)}function Mb(a,b,c){var h=this;h.a=h.b=h.c=h.d=null,h.f=new yb,h.a=a,h.b=b,h.d=c,h.a.style.backgroundColor='white',h.c=p(h.a),h.c.scale(window.devicePixelRatio,window.devicePixelRatio),t(h.f,h.a),t(h.f,h.b),h.f.a.push(new vb(function(d){(V(d)==h.a||V(d)==h.b)&&da(h,j(d))},null,null)),h.f.a.push(new vb(null,function(f){new wb(xa.a.a).a&&da(h,j(f))},null));var e=h.a.getBoundingClientRect();da(h,new Bb(e.width/2|0,e.height/2|0))}function Nb(a,b){var e=this;e.a=e.b=e.c=e.d=null,e.f=0,e.e=new yb,e.h=e.g=e.i=e.l=null,e.b=a,e.c=b,e.a=$a(),e.d=p(e.b),e.d.scale(window.devicePixelRatio,window.devicePixelRatio),e.f=b.getBoundingClientRect().width;var c=H(new Bb(e.c.width,e.c.height),2),d=H(new Bb(e.a.width,
e.a.height),2);e.h=H(n(c,d),window.devicePixelRatio),e.i=Y(e.h),t(e.e,e.b),t(e.e,e.c),e.g=new zb(e.c),e.g.d=function(f){switch(f){case 0:ea(e,na(e.i,e.g.c));break;case 1:Z(e.i,e.g.c),ea(e,e.i);break}},e.e.a.push(e.g),ea(e,e.h)}function Ob(a,b,c){var g=this;g.a=g.b=g.c=g.d=null,g.f=12,g.e=[],g.h=[],g.g=null,g.i=new yb,g.a=a,g.b=b,g.d=c,g.c=p(g.a),g.c.scale(window.devicePixelRatio,window.devicePixelRatio);for(var d=g.a.getBoundingClientRect(),f=1,i=g.f;f<i;f=f+1|0)g.e.push(new Ab(new Bb(Math.random()*d.width,Math.random()*d.height))),g.e[g.e.length-1|0].c=ab[f%ab.length|0],g.h.push(15+Math.random()*8);g.g=new Ab(new Bb(Math.random()*d.width,Math.random()*d.height)),g.g.c=m(16771345),t(g.i,g.a),t(g.i,g.b),g.i.a.push(new vb(function(e){g.g.a=j(e)},null,null)),g.i.a.push(new vb(null,function(h){g.g.a=j(h)},null)),bb(g)}function Pb(a,b,c){var i=this;i.b=i.c=0,i.d=i.f=i.e=null,i.h=0,i.a=a,p(i.a).scale(window.devicePixelRatio,window.devicePixelRatio),i.c=b,i.b=c,i.f=new Rb(new Qb(0,0),0),ia(a,function(d){gb(i,d)}),i.d=new yb,
t(i.d,a);var f=function(e){var h=H(j(e),R(i));i.f.a=new Qb((h.a|0)-1|0,h.b|0)};i.d.a.push(new vb(f,null,null)),i.d.a.push(new vb(null,function(g){new wb(xa.a.a).a&&f(g)},null))}function Sb(a){this.a=null,this.b=[],this.c=null,this.d=new Bb(0,0),this.f=new Bb(0,0),this.e=new Bb(0,0),this.a=a;var b=this.a.a.getBoundingClientRect(),c=new Bb(b.width,b.height);this.f=new Bb(c.a/2,c.b/2),this.d=Y(this.f),this.d.b-=50;for(var d=0;d<20;d=d+1|0)for(var f=sb(d,d),e=0;e<10;e++){var h=f*Math.cos(e/10*3.141592653589793*2),g=f*Math.sin(e/10*3.141592653589793*2);h+=Math.random()*30-15,g+=Math.random()*30-15,this.b.push(new Bb(h,g))}ua(this)}ha=Sb.prototype;ha.ya=function(a){this.e=j(a);var b=j(a);this.c=z(n(this.d,b))<z(n(this.f,b))?new Tb(1):new Tb(0),U(a),va(this,a)};ha.za=function(a){this.e=j(a),this.c?va(this,a):ga(this),U(a)};ha.Aa=function(a){wa(this.a,j(a)),this.c=null,this.e=j(a),ga(this),U(a)};function Ub(a,b,c){this.a=this.b=this.c=this.d=this.f=this.e=this.h=this.g=null,this.i=new yb,this.a=a,this.b=b,t(this.i,this.a),
t(this.i,this.b),this.g=c,this.c=p(this.a),this.c.scale(window.devicePixelRatio,window.devicePixelRatio),this.d=document.createElement('canvas'),this.f=p(this.d),this.d.width=this.a.width,this.d.height=this.a.height,this.e=document.getElementById('eye');var d=document.createElement('canvas');d.width=this.d.width,d.height=this.d.height,p(d).drawImage(this.e,0,0,this.e.naturalWidth,this.e.naturalHeight,0,0,d.width,d.height),this.h=this.f.createPattern(d,'repeat'),this.i.a.push(new Sb(this))}function Vb(a,b,c,d){var e=this;e.c=e.d=e.f=e.e=e.h=e.g=e.i=null,e.a=a,e.b=b,e.f=document.createElement('canvas'),Q(e.f,e.a),e.e=document.createElement('canvas'),Q(e.e,e.a),e.h=p(e.b);var f=new Kb;e.g=G(e.e,f),e.i=new Nb(e.f,b),e.i.l=function(){S(e)},e.c=new Ib(c,r(r(N(null),'start',1),'range',{min:1,max:256})),e.c.a.noUiSlider.on('slide',function(){S(e)}),e.d=new Ib(d,r(r(N(null),'start',22),'range',{min:1,max:256})),e.d.a.noUiSlider.on('slide',function(){S(e)}),S(e)}function Db(a,b,c){if(this.a=this.b=null,this.c=N(null),this.d=N(null),
this.a=a,this.b=this.a.createProgram(),this.a.attachShader(this.b,pa(this,35633,b)),this.a.attachShader(this.b,pa(this,35632,c)),this.a.linkProgram(this.b),!this.a.getProgramParameter(this.b,35714))throw new Error(this.a.getProgramInfoLog(this.b))}function Eb(a){this.b=null,this.c=0,this.d=-1,this.a=a,this.b=this.a.createBuffer(),this.c=34962}function Fb(a,b){this.a=a,this.b=b}function Gb(a,b,c,d,f){this.a=a,this.b=b,this.c=c,this.d=d,this.f=f}function Hb(a,b){this.b=this.c=null,this.a=a,this.b=Na(b),this.c=this.a.createTexture(),this.a.bindTexture(3553,this.c),this.a.texParameteri(3553,10242,this.b.c),this.a.texParameteri(3553,10243,this.b.c),this.a.texParameteri(3553,10241,this.b.d),this.a.texParameteri(3553,10240,this.b.d)}function Kb(){this.a=!1,this.b=-1}function Qb(a,b){this.a=a,this.b=b}function Rb(a,b){this.a=a,this.b=b}function Tb(a){this.a=a}var xa=new xb,ab=[m(7051762),m(4814543),m(8428277),m(8305894),m(9011445),m(970239),m(5611513)],ob=m(3355443),pb=m(10066329),Da=m(10855845),qb=m(9391359),rb=new Float32Array([-1,
-1,1,-1,-1,1,1,1]);Lb()})();
