(function(){var P=Object.create||function(a){return{__proto__:a}};var rb=Math.imul||function(a,b){return (a*(b>>>16)<<16)+a*(b&65535)|0};var ca;function ha(a,b){return a-b*Math.floor(a/b)}function Na(a){return a!=0&&(a&a-1)==0}function _(a,b){a.width=a.height=b*window.devicePixelRatio|0,a.style.width=a.style.height=b+'px'}function p(a,b,c){var d=a.getElementsByClassName(b)[0];return _(d,c),d}function G(a,b){var c=null;try{c=new Hb(a,b)}catch(d){document.getElementById('demo-page').style.display='none',document.getElementById('webgl-error').style.display=null;throw d}return c}function Sa(a){var b=p(a,'input-canvas',256),c=p(a,'output-canvas',256),d=new Ib,e=G(c,d);new Kb(b,c,function(){E(e,b,new Float32Array([0,0,0,0])),J(e),N(e)})}function Ta(a){var b=p(a,'input-canvas',256),c=p(a,'output-canvas',256),d=new Ib;d.a=!0;var e=G(c,d);new Mb(b,c,function(){E(e,b,new Float32Array([0,0,0,0])),J(e),N(e)})}function Ua(a){var b=p(a,'input-canvas',256),c=p(a,'output-canvas',256),d=new Ib,e=G(c,d);new Sb(b,c,function(g){E(e,
g.d,new Float32Array([0,0,0,0])),J(e),N(e)})}function Va(a){var b=p(a,'input-canvas',256),c=p(a,'output-canvas',256),d=new Ib;d.a=!0;var e=G(c,d);new Mb(b,c,function(){E(e,b,new Float32Array([0,0,0,0])),J(e),Oa(e)})}function Wa(a){var b=p(a,'input-canvas',256),c=p(a,'output-canvas',256),d=q(c);d.scale(window.devicePixelRatio,window.devicePixelRatio);var e=document.createElement('canvas');_(e,256);var g=a.getElementsByClassName('shadow-spread-slider')[0],h=new Ib,f=G(e,h),i=new Lb(b,c),m=.01,l=i.h,j=function(r,v){E(f,b,new Float32Array([1,1,1,1])),J(f),Pa(f,r),d.fillStyle='white',d.fillRect(0,0,c.width/2|0,c.height/2|0),d.drawImage(e,0,0,c.width/2|0,c.height/2|0),ra(i,d,o(v,new Ab(7,7)))};i.f.d=function(H){switch(H){case 0:j(m,ja(l,i.f.c));break;case 1:V(l,i.f.c),j(m,l);break}},noUiSlider.create(g,w(w(P(null),'start',m),'range',{min:0,max:.5})),g.noUiSlider.on('slide',function(){m=g.noUiSlider.get(),j(m,l)}),j(m,l)}function Xa(a){var b=p(a,'input-canvas',256),c=p(a,'output-canvas',256),d=new Ib,e=G(c,d),g=a.getElementsByClassName('jfa-round-label')[0],h=a.getElementsByClassName('jfa-round-slider')[0],f=Math.log2(256)+1|0;
noUiSlider.create(h,w(w(w(P(null),'start',f),'step',1),'range',{min:1,max:f}));var i=function(m){g.textContent='Round #'+(h.noUiSlider.get()|0),E(e,b,new Float32Array([0,0,0,0])),Qa(e);for(var l=0;l<m;l=l+1|0)e.K();N(e)};h.noUiSlider.on('slide',function(){i(h.noUiSlider.get()|0)}),new Kb(b,c,function(){i(h.noUiSlider.get()|0)}),i(f)}function Ya(a){var b=a.getElementsByTagName('canvas')[0];_(b,256);var c=new Nb(b,256,16),d=a.getElementsByClassName('step-size-slider')[0],e=a.getElementsByClassName('step-size-label')[0],g=Math.log2(16)-1|0;noUiSlider.create(d,w(w(w(P(null),'start',0),'step',1),'range',{min:0,max:g}));var h=function(f){var i=aa(f,16);e.textContent='JFA round '+f+', step length is '+i},m=function(l){h(l),c.e.b=l},j=function(r){h(r)},v=!1;d.noUiSlider.on('start',function(){v=!0}),d.noUiSlider.on('end',function(){m(d.noUiSlider.get()|0),v=!1}),d.noUiSlider.on('slide',function(){m(d.noUiSlider.get()|0)}),c.g=function(){v||(j(c.e.b),d.noUiSlider.set(c.e.b))},j(0)}function Jb(){u(window,'load',function(){
Sa(document.getElementById('paint-demo-container')),Ta(document.getElementById('fish-demo-container')),Ua(document.getElementById('photo-demo-container')),Ya(document.getElementById('jfa-pattern-demo-container')),Xa(document.getElementById('slider-demo-container')),Va(document.getElementById('distance-demo-container')),Wa(document.getElementById('shadow-demo-container'))})}function Aa(a){var b=a.getBoundingClientRect();return b.bottom>-1&&b.right>-1&&b.top<=window.innerHeight&&b.left<=window.innerWidth}function da(a,b){var c=null,d=function(){if(Aa(a)){var e=new Date,g=c?+e-+c:1/30;b(g),c=e}requestAnimationFrame(d)};requestAnimationFrame(d)}function x(a){return 'rgba('+(a.a*255|0)+', '+(a.b*255|0)+', '+(a.c*255|0)+', '+a.d+')'}function n(a){return new sb((a>>16&255)/255,(a>>8&255)/255,(a&255)/255,1)}function R(a){a.b?a.b.stopPropagation():a.c.stopPropagation()}function S(a){return a.b?a.b.target:a.c.target}function k(c){var a=S(c).getBoundingClientRect(),b=null;return b=c.b?new Ab(c.b.clientX,c.b.clientY):new Ab(Y(c.c.touches)[0].clientX,
Y(c.c.touches)[0].clientY),o(b,new Ab(a.left,a.top))}function s(i,a){u(a,'mousedown',function(b){ea(i,new tb(i,b,null)),B(b)}),u(a,'mousemove',function(c){fa(i,new tb(i,c,null)),B(c)}),u(a,'mouseup',function(d){T(i,new tb(i,d,null)),B(d)}),u(a,'mouseleave',function(e){T(i,new tb(i,e,null)),B(e)}),u(a,'touchstart',function(g){ea(i,new tb(i,null,g)),B(g)}),u(a,'touchmove',function(h){fa(i,new tb(i,null,h)),B(h)}),u(a,'touchend',function(f){T(i,new tb(i,null,f)),B(f)})}function ea(c,a){for(var d=0,e=c.a,g=e.length;d<g;d=d+1|0){var b=e[d];b.wa(a)}}function T(c,a){for(var d=0,e=c.a,g=e.length;d<g;d=d+1|0){var b=e[d];b.ya(a)}}function fa(c,a){for(var d=0,e=c.a,g=e.length;d<g;d=d+1|0){var b=e[d];b.xa(a)}}function U(c,a,b){c.c=o(a,c.b),c.d&&c.d(b)}function ga(b,a){a.beginPath(),a.rect(b.a.a-(b.b/2|0)|0,b.a.b-(b.b/2|0)|0,b.b,b.b),a.fillStyle=x(b.c),a.fill(),a.closePath()}function ia(a){return new Ab(a.a,a.b)}function ja(b,a){return new Ab(b.a+a.a,b.b+a.b)}function o(b,a){return new Ab(b.a-a.a,b.b-a.b)}function Ca(b,a){
return new Ab(b.a-a,b.b-a)}function ka(b,a){return new Ab(b.a*a,b.b*a)}function la(b,a){return new Ab(b.a/a,b.b/a)}function V(b,a){b.a+=a.a,b.b+=a.b}function Da(b,a){b.a=ha(b.a,a.a),b.b=ha(b.b,a.b)}function Ea(b,a){b.a*=a,b.b*=a}function Fa(b,a){return new Ab(b.a*Math.cos(a)-b.b*Math.sin(a),b.b*Math.cos(a)+b.a*Math.sin(a))}function Ga(a){return la(a,y(a))}function Ha(a){return Math.atan2(a.b,a.a)}function y(a){return Math.sqrt(a.a*a.a+a.b*a.b)}function ma(d,a,b){var c=d.a.createShader(a);if(d.a.shaderSource(c,b),d.a.compileShader(c),!d.a.getShaderParameter(c,35713)){console.error(d.a.getShaderInfoLog(c));throw new Error('Failed to create shader')}return c}function C(a){return a.a.useProgram(a.b),a}function t(d,a,b){var c=W(d,a);return d.a.uniform1i(c,b),d}function na(d,a,b){var c=W(d,a);return d.a.uniform1f(c,b),d}function z(d,a,b){var c=W(d,a);if(b.length^2){if(b.length^3){if(b.length^4)throw new Error('Invalid size of value: '+b.length);else d.a.uniform4fv(c,b)}else d.a.uniform3fv(c,b)}else d.a.uniform2fv(c,
b);return d}function D(g,a,b,c,d){var e=Ia(g,a);return oa(b),g.a.enableVertexAttribArray(e),g.a.vertexAttribPointer(e,c,5126,!1,d,0),g}function Ia(b,a){return a in b.d||(b.d[a]=b.a.getAttribLocation(b.b,a)),b.d[a]}function W(b,a){return a in b.c||(b.c[a]=b.a.getUniformLocation(b.b,a)),b.c[a]}function oa(a){a.a.bindBuffer(a.c,a.b)}function Ja(c,a,b){oa(c),c.d^a.byteLength?(c.a.bufferData(c.c,a,b),c.d=a.byteLength):c.a.bufferSubData(c.c,0,a)}function Ka(a){return new Eb(a,a.createFramebuffer())}function pa(a){a.a.bindFramebuffer(36160,a.b)}function I(b,a){pa(b),b.a.framebufferTexture2D(36160,36064,3553,a.c,0)}function La(a){return new Fb(a.a,a.b,a.c,a.d,a.e)}function X(a){a.a.bindTexture(3553,a.c)}function A(b,a){b.a.activeTexture(33984+a),X(b)}function M(c,a,b){X(c),c.a.texImage2D(3553,0,c.b.b,a,b,0,c.b.b,c.b.e,null)}function qa(b,a){X(b),b.a.texImage2D(3553,0,b.b.b,b.b.b,b.b.e,a)}function E(c,a,b){c.Q=a,I(c.H,c.l),qa(c.r,a),A(c.r,0),c.b.a.viewport(0,0,c.c,c.c),z(z(t(D(C(c.d),'quad',c.m,2,0),'iSeedInputTexture',
0),'iGridSize',new Float32Array([c.c,c.c])),'iBackgroundColor',b).a.drawArrays(5,0,4)}function N(a){I(a.H,a.v),qa(a.r,a.Q),A(a.r,0),A(a.j,1),a.b.a.viewport(0,0,a.c,a.c),na(z(t(t(D(C(a.g),'quad',a.m,2,0),'iSeedInputTexture',0),'iCellGridTexture',1),'iGridSize',new Float32Array([a.c,a.c])),'iMinSeedDistanceThreshold',a.a.b*window.devicePixelRatio).a.drawArrays(5,0,4),Z(a)}function Oa(a){I(a.H,a.v),A(a.j,0),a.b.a.viewport(0,0,a.c,a.c),z(t(D(C(a.h),'quad',a.m,2,0),'iCellGridTexture',0),'iGridSize',new Float32Array([a.c,a.c])).a.drawArrays(5,0,4),Z(a)}function Pa(b,a){if(a<0||a>1)throw new Error('Invalid shadowSpread '+a);I(b.H,b.v),A(b.j,0),b.b.a.viewport(0,0,b.c,b.c),na(z(t(D(C(b.f),'quad',b.m,2,0),'iCellGridTexture',0),'iGridSize',new Float32Array([b.c,b.c])),'iShadowSpread',a).a.drawArrays(5,0,4),Z(b)}function Z(a){pa(a.b.b),A(a.v,0),a.b.a.viewport(0,0,a.L.width,a.L.height),z(t(D(C(a.i),'quad',a.m,2,0),'iTexture',0),'iResolution',new Float32Array([a.L.width,a.L.height])).a.drawArrays(5,0,4)}function J(b){for(var a=b.c/2|0;a>0;)F(b,
a),a=a/2|0;F(b,2),F(b,1)}function Qa(b){var a=b.c/2|0;b.K=function(){a>=1?(F(b,a|0),a/=2):a<1&&(F(b,2),F(b,1))}}function F(b,a){I(b.H,b.j),A(b.l,0),b.b.a.viewport(0,0,b.c,b.c),t(z(t(t(D(C(b.e),'quad',b.m,2,0),'iCellGridTexture',0),'iStepSize',a),'iCellGridSize',new Float32Array([b.c,b.c])),'iUseTorusDistanceForSeeds',b.a.a?1:0).a.drawArrays(5,0,4),Ra(b)}function Ra(b){var a=b.l;b.l=b.j,b.j=a}function $(d,a){var b=d.a.getBoundingClientRect();if(a.a>0&&a.b>0&&a.a<b.width&&a.b<b.height){var c=new sb(.5+Math.random()*.4,.2,.3+Math.random()*.5,1);d.c.beginPath(),d.c.rect(a.a-1|0,a.b-1|0,2,2),d.c.fillStyle=x(c),d.c.fill(),d.d&&d.d()}}function Za(){var a=document.createElement('canvas'),b=q(a);b.clearRect(0,0,a.width,a.height),b.font='60px Baskerville';var c=b.measureText('Voronoi').width;return a.width=Math.round(c)*window.devicePixelRatio|0,a.height=window.devicePixelRatio*60|0,b.scale(window.devicePixelRatio,window.devicePixelRatio),b.font='60px Baskerville',b.fillStyle='#333',b.textBaseline='hanging',b.fillText('Voronoi',
0,0),a}function _a(a){a.d.fillStyle='white',a.d.fillRect(0,0,a.e,a.e),ra(a,a.d,a.h)}function ra(c,a,b){a.drawImage(c.a,b.a,b.b,c.a.width/2|0,c.a.height/2|0)}function ab(b){da(b.a,function(a){bb(b,a)})}function bb(f,a){var b=a/1000,c=f.a.getBoundingClientRect();f.c.clearRect(0,0,c.width,c.height);for(var d=1,m=f.g.length;d<m;d=d+1|0){var e=f.g[d];e.a.a+=f.h[d]*b,e.a.b-=f.h[d]*b;for(var g=1,i=f.g.length;g<i;g=g+1|0)d^g&&y(o(e.a,f.g[g].a))<40&&V(e.a,ka(ka(Ga(o(e.a,f.g[g].a)),b),5));Da(e.a,new Ab(c.width,c.height))}for(var l=0,j=f.g,r=j.length;l<r;l=l+1|0){var h=j[l];ga(h,f.c)}ga(f.f,f.c),f.d&&f.d()}function cb(a){return new Pb(a.a,a.b)}function aa(a,b){if(a<0||a==Math.log2(b))throw new Error(a+' is not a valid round for JFA gridSize '+b);return b/za(2,a+1|0)|0}function db(a,b,c){var d=Math.atan2(c.b-b.b|0,c.a-b.a|0);a.moveTo(b.a,b.b),a.lineTo(c.a,c.b),a.stroke();var e=new Ab(c.a-Math.cos(d-.5235987755982988)*10,c.b-Math.sin(d-.5235987755982988)*10),g=new Ab(c.a-Math.cos(d+.5235987755982988)*10,c.b-Math.sin(d+.5235987755982988)*10);
a.beginPath(),a.moveTo(c.a,c.b),a.lineTo(e.a,e.b),a.lineTo(g.a,g.b),a.fill()}function eb(c,a){var b=cb(a);return b.a.a=b.a.a+1|0,b.a.a^c.b||(b.a.a=0,b.a.b=b.a.b+1|0),b.a.b^c.b||(b.a.b=0,b.b=(b.b+1|0)%Math.log2(c.b)|0),b}function O(a){return a.c/a.b|0}function fb(d,a){if(d.h+=a,d.h>100){d.h=0;var b=d.e.b;d.e=eb(d,d.e),b^d.e.b&&d.g&&d.g();var c=q(d.a);c.clearRect(0,0,d.c,d.c),gb(d,c),hb(d,c),ib(d,c)}}function gb(e,a){var b=O(e);a.beginPath(),a.lineWidth=1;for(var c=0,g=e.b+1|0;c<g;c=c+1|0)a.moveTo(0,rb(b,c)),a.lineTo(e.c,rb(b,c));for(var d=0,h=e.b+1|0;d<h;d=d+1|0)a.moveTo(rb(b,d),0),a.lineTo(rb(b,d),e.c);a.strokeStyle=x(nb),a.stroke(),a.beginPath(),a.rect(0,0,e.c-1|0,e.c-1|0),a.strokeStyle=x(ob),a.stroke()}function hb(f,a){var b=O(f);a.beginPath(),a.rect(rb(f.e.a.a,b),rb(f.e.a.b,b),b,b),a.strokeStyle=x(Ba),a.stroke(),a.beginPath(),a.lineWidth=1,a.strokeStyle=x(pb);for(var c=aa(f.e.b,f.b),j=0,r=[-c|0,0,c],v=r.length;j<v;j=j+1|0)for(var d=r[j],i=0,m=[-c|0,0,c],l=m.length;i<l;i=i+1|0){var e=m[i],g=f.e.a.a+d|0,h=f.e.a.b+e|0;
a.rect(rb(g,b)+1|0,rb(h,b)+1|0,b-2|0,b-2|0)}a.stroke()}function ib(j,a){var b=aa(j.e.b,j.b),c=O(j);a.beginPath(),a.lineWidth=1,a.strokeStyle=x(Ba),a.fillStyle='white';for(var K=0,Q=[-b|0,0,b],L=Q.length;K<L;K=K+1|0)for(var d=Q[K],r=0,v=[-b|0,0,b],H=v.length;r<H;r=r+1|0){var e=v[r];if(d||e){var g=j.e.a.a+d|0,h=j.e.a.b+e|0,f=rb(g,c),i=rb(h,c),m=d^-b?d?c:c/2|0:0,l=e^-b?e?c:c/2|0:0;db(a,new Ob(rb(j.e.a.a,c)+m|0,rb(j.e.a.b,c)+l|0),new Ob(f+(c/2|0)|0,i+(c/2|0)|0))}}}function sa(d){mb(d.a);for(var a=Ha(o(d.d,d.e)),e=0,g=d.b,h=g.length;e<h;e=e+1|0){var b=g[e],c=ia(b);Ea(c,Math.max(y(o(d.e,d.d))/50*2,.5)),c=Fa(c,a),V(c,d.e),jb(d,c)}ba(d),d.a.f(d.a)}function ba(h){var a=h.a.c,b=h.d,c=h.e;a.beginPath(),a.lineWidth=1,a.moveTo(b.a|0,b.b|0),a.lineTo(c.a|0,c.b|0),a.strokeStyle='#A5A3A3',a.stroke();var d='#46C9FF',e='#46C9FF';y(o(h.g,h.d))<10?e=h.c?'#0F86B7':'#ACE7FF':y(o(h.g,h.e))<12&&(d=h.c?'#0F86B7':'#ACE7FF'),a.beginPath(),a.arc(c.a,c.b,6,0,6.283185307179586),a.fillStyle='#FFF',a.fill(),a.lineWidth=2,a.strokeStyle=d,a.stroke();
var g=Ca(b,4);a.beginPath(),a.rect(g.a,g.b,8,8),a.fillStyle='#FFF',a.fill(),a.lineWidth=2,a.strokeStyle=e,a.stroke()}function ta(c,a){switch(c.c.a){case 0:var b=o(c.d,c.e);c.e=k(a),c.d=ja(c.e,b);break;case 1:c.d=k(a);break}sa(c)}function jb(c,a){var b=c.a.a.getBoundingClientRect().width;a.a>0&&a.b>0&&a.a<b&&a.b<b&&ua(c.a,a)}function kb(e,a,b,c,d){a.fillStyle=c,lb(e,a,b,d)}function lb(d,a,b,c){a.beginPath(),a.rect(b.a|0,b.b|0,c,c),a.fill()}function mb(b){var a=b.a.getBoundingClientRect();b.c.clearRect(0,0,a.width,a.height),b.e.clearRect(0,0,b.d.width,b.d.height)}function ua(b,a){kb(b,b.c,a,'rgba(255, 255, 255, 0.7)',2),b.e.fillStyle=b.h,b.e.beginPath(),b.e.rect(a.a*window.devicePixelRatio|0,a.b*window.devicePixelRatio|0,1,1),b.e.fill()}function Y(a){for(var b=[],c=0,d=a.length;c<d;c=c+1|0)b.push(a[c]);return b}function u(a,b,c){a.addEventListener(b,c)}function B(a){a.preventDefault()}function za(d,a){for(var b=d,c=a<0?0:1;a>0;)a&1&&(c=rb(c,b)),a>>=1,b=rb(b,b);return c}function w(c,a,b){return c[a]=b,c}function q(a){
try{return a.getContext('2d')}catch(b){}return null}function Ma(a){try{return a.getContext('webgl')}catch(b){}try{return a.getContext('experimental-webgl')}catch(c){}return null}function sb(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d}function tb(a,b,c){this.a=a,this.b=b,this.c=c}function ub(a,b,c){this.a=a,this.b=b,this.c=c}ca=ub.prototype;ca.wa=function(a){this.a&&this.a(a)};ca.xa=function(a){this.b&&this.b(a)};ca.ya=function(a){this.c&&this.c(a)};function vb(a){this.a=a}function wb(){var d=this;d.a=new vb(!1),u(window,'load',function(){var a=function(){d.a.a=!0},b=function(){d.a.a=!1};document.addEventListener('mousedown',a,!0),document.addEventListener('mouseup',b),document.addEventListener('touchstart',a),document.addEventListener('touchend',b),document.addEventListener('mouseout',function(c){!c.toElement&&!c.relatedTarget&&b()})})}function xb(){this.a=[]}function yb(a){this.b=this.c=this.d=null,this.a=a}ca=yb.prototype;ca.wa=function(a){this.a.style.cursor='move',this.b=k(a),U(this,k(a),0)};ca.xa=function(a){
this.a.style.cursor=new vb(va.a.a).a?'move':null,this.b&&U(this,k(a),0)};ca.ya=function(a){this.b&&(U(this,k(a),1),this.b=null),this.a.style.cursor=null};function zb(a){this.a=a,this.b=2,this.c=new sb(0,0,1,1)}function Ab(a,b){this.a=a,this.b=b}function Bb(a){this.a=this.b=null,this.a=Ma(a),this.b=new Eb(this.a,null)}function Hb(a,b){if(this.a=this.b=null,this.c=0,this.d=this.e=this.g=this.h=this.f=this.i=this.m=this.l=this.j=this.r=this.v=this.H=this.K=this.Q=this.L=null,a.width^a.height)throw new Error('Voronoi canvas parameter must be square. Size is ('+a.width+', '+a.height+')');if(!Na(a.width))throw new Error('Voronoi canvas size must be a power of two. Size is '+a.width);if(this.a=b,this.c=a.width,this.L=a,this.b=new Bb(a),!this.b.a)throw new Error('Failed to initialize Wham');this.b.a.disable(2929);var c=this.b.a;c.disable(2929),this.e=new Cb(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n',
'precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture;\nuniform vec2 iCellGridSize;\nuniform int iStepSize;\nuniform bool iUseTorusDistanceForSeeds;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\n\nint x(int a, int b) {\n  return int(mod(float(a), float(b)));\n}\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nivec2 u(int a) {\n  return ivec2(a / 256, x(a, 256));\n}\n\nbool r(vec2 a) {\n  return a.x >= 0.0 && a.y >= 0.0 && a.x <= 1.0 && a.y <= 1.0;\n}\n\nvec4 v(const ivec2 a) {\n  ivec2 b = u(a.x), c = u(a.y);\n  return vec4(vec2(b) / 255.0, vec2(c) / 255.0);\n}\n\nvec4 y() {\n  return v(ivec2(21000, 21000));\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nbool t(const vec4 a) {\n  vec2 b = g(a);\n  return b.x < 2e+4;\n}\n\nfloat q(vec2 a, vec2 b, vec2 c) {\n  float d = min(abs(a.x - b.x), c.x - abs(a.x - b.x)), e = min(abs(a.y - b.y), c.y - abs(a.y - b.y));\n  return sqrt(d * d + e * e);\n}\n\nvec4 h(const vec4 b, const vec2 s) {\n  vec2 c = (gl_FragCoord.xy + s) / iCellGridSize;\n  vec4 a = texture2D(iCellGridTexture, c);\n  a = !r(c) && !iUseTorusDistanceForSeeds ? y() : a;\n  if (!t(a))\n    return b;\n  else if (!t(b))\n    return a;\n  else {\n    vec2 d = g(b), e = g(a);\n    float z = iUseTorusDistanceForSeeds ? q(d, gl_FragCoord.xy, iCellGridSize) : distance(d, gl_FragCoord.xy), B = iUseTorusDistanceForSeeds ? q(e, gl_FragCoord.xy, iCellGridSize) : distance(e, gl_FragCoord.xy);\n    if (z > B)\n      return a;\n  }\n  return b;\n}\n\nvoid main() {\n  vec2 b = gl_FragCoord.xy / iCellGridSize;\n  vec4 a = texture2D(iCellGridTexture, b);\n  a = h(a, vec2(0, iStepSize)), a = h(a, vec2(iStepSize, iStepSize)), a = h(a, vec2(iStepSize, 0)), a = h(a, vec2(iStepSize, -iStepSize)), a = h(a, vec2(0, -iStepSize)), a = h(a, vec2(-iStepSize, -iStepSize)), a = h(a, vec2(-iStepSize, 0)), a = h(a, vec2(-iStepSize, iStepSize)), gl_FragColor = a;\n}\n'),
this.d=new Cb(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iSeedInputTexture;\nuniform vec2 iGridSize;\nuniform vec4 iBackgroundColor;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\n\nint x(int a, int b) {\n  return int(mod(float(a), float(b)));\n}\n\nivec2 u(int a) {\n  return ivec2(a / 256, x(a, 256));\n}\n\nbool w(float a, float b) {\n  return abs(a - b) < 1e-4;\n}\n\nbool A(vec4 a, vec4 b) {\n  return w(a.x, b.x) && w(a.y, b.y) && w(a.z, b.z) && w(a.w, b.w);\n}\n\nvec4 v(const ivec2 a) {\n  ivec2 b = u(a.x), c = u(a.y);\n  return vec4(vec2(b) / 255.0, vec2(c) / 255.0);\n}\n\nvec4 y() {\n  return v(ivec2(21000, 21000));\n}\n\nvoid main() {\n  vec2 a = gl_FragCoord.xy / iGridSize, b = vec2(a.x, 1.0 - a.y);\n  vec4 c = texture2D(iSeedInputTexture, b);\n  gl_FragColor = A(c, iBackgroundColor) ? y() : v(ivec2(gl_FragCoord.xy));\n}\n'),
this.i=new Cb(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iInputTexture;\nuniform vec2 iResolution;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\n\nvoid main() {\n  vec2 a = gl_FragCoord.xy / iResolution;\n  gl_FragColor = texture2D(iInputTexture, a);\n}\n'),this.g=new Cb(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n',
'precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture, iSeedInputTexture;\nuniform vec2 iGridSize;\nuniform float iMinSeedDistanceThreshold;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nbool t(const vec4 a) {\n  vec2 b = g(a);\n  return b.x < 2e+4;\n}\n\nfloat q(vec2 a, vec2 b, vec2 c) {\n  float d = min(abs(a.x - b.x), c.x - abs(a.x - b.x)), e = min(abs(a.y - b.y), c.y - abs(a.y - b.y));\n  return sqrt(d * d + e * e);\n}\n\nvoid main() {\n  vec2 d = gl_FragCoord.xy / iGridSize;\n  vec4 a = texture2D(iCellGridTexture, d);\n  vec2 b = g(a) + vec2(0.5);\n  float e = q(b, gl_FragCoord.xy, iGridSize);\n  if (t(a) && iMinSeedDistanceThreshold < 0.0 || e < iMinSeedDistanceThreshold) {\n    vec2 c = b / iGridSize, s = vec2(c.x, 1.0 - c.y);\n    gl_FragColor = texture2D(iSeedInputTexture, s);\n  }\n  else\n    gl_FragColor = t(a) ? k : j;\n}\n'),
this.h=new Cb(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture;\nuniform vec2 iGridSize;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nbool r(vec2 a) {\n  return a.x >= 0.0 && a.y >= 0.0 && a.x <= 1.0 && a.y <= 1.0;\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nfloat q(vec2 a, vec2 b, vec2 c) {\n  float d = min(abs(a.x - b.x), c.x - abs(a.x - b.x)), e = min(abs(a.y - b.y), c.y - abs(a.y - b.y));\n  return sqrt(d * d + e * e);\n}\n\nvoid main() {\n  vec2 b = gl_FragCoord.xy / iGridSize;\n  if (!r(b)) {\n    gl_FragColor = i;\n    return;\n  }\n  vec4 c = texture2D(iCellGridTexture, b);\n  vec2 d = g(c);\n  float a = q(d, gl_FragCoord.xy, iGridSize);\n  a = 1.0 - a / (iGridSize.x * 0.5), gl_FragColor = vec4(a, a, a, 1.0);\n}\n'),
this.f=new Cb(this.b.a,'precision highp float;\nprecision highp int;\n\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\nattribute vec2 quad;\n\nvoid main() {\n  gl_Position = vec4(quad, 0, 1.0);\n}\n','precision highp float;\nprecision highp int;\n\nuniform sampler2D iCellGridTexture;\nuniform vec2 iGridSize;\nuniform float iShadowSpread;\nconst vec4 i = vec4(1.0, 0.0, 0.0, 1.0), o = vec4(0.0, 1.0, 0.0, 1.0), p = vec4(0.0, 0.0, 1.0, 1.0), l = vec4(0.0, 1.0, 1.0, 1.0), m = vec4(1.0, 0.0, 1.0, 1.0), n = vec4(1.0, 1.0, 0.0, 1.0), k = vec4(0.0, 0.0, 0.0, 1.0), j = vec4(1.0, 1.0, 1.0, 1.0);\n\nint f(ivec2 a) {\n  return a.x * 256 + a.y;\n}\n\nbool r(vec2 a) {\n  return a.x >= 0.0 && a.y >= 0.0 && a.x <= 1.0 && a.y <= 1.0;\n}\n\nvec2 g(const vec4 a) {\n  int b = f(ivec2(a.rg * 255.0)), c = f(ivec2(a.ba * 255.0));\n  return vec2(b, c);\n}\n\nvoid main() {\n  vec2 b = gl_FragCoord.xy / iGridSize;\n  float d = max(iShadowSpread, 0.01);\n  if (!r(b)) {\n    gl_FragColor = i;\n    return;\n  }\n  vec4 e = texture2D(iCellGridTexture, b);\n  vec2 s = g(e);\n  float a = distance(s, gl_FragCoord.xy);\n  a /= iGridSize.x * d, a = pow(a, 1.3), a = clamp(a, 0.0, 1.0);\n  vec4 z = vec4(a, a, a, 1.0);\n  float c = (1.0 - iShadowSpread) / 1.5;\n  gl_FragColor = z * c + (1.0 - c) * j;\n}\n'),
this.m=new Db(c),Ja(this.m,qb,35044);var d=new Fb(c,6408,10497,9728,5121);this.l=new Gb(c,d),M(this.l,this.c,this.c),this.j=new Gb(c,d),M(this.j,this.c,this.c),d=new Fb(c,6408,10497,9729,5121),this.v=new Gb(c,d),M(this.v,this.c,this.c),d=new Fb(c,6408,10497,9728,5121),this.r=new Gb(c,d),M(this.r,this.c,this.c),this.H=Ka(c)}function Kb(a,b,c){var h=this;h.a=h.b=h.c=h.d=null,h.e=new xb,h.a=a,h.b=b,h.d=c,h.a.style.backgroundColor='white',h.c=q(h.a),h.c.scale(window.devicePixelRatio,window.devicePixelRatio),s(h.e,h.a),s(h.e,h.b),h.e.a.push(new ub(function(d){(S(d)==h.a||S(d)==h.b)&&$(h,k(d))},null,null)),h.e.a.push(new ub(null,function(e){new vb(va.a.a).a&&$(h,k(e))},null));var g=h.a.getBoundingClientRect();$(h,new Ab(g.width/2|0,g.height/2|0))}function Lb(a,b){this.a=this.b=this.c=this.d=null,this.e=0,this.g=new xb,this.h=this.f=null,this.b=a,this.c=b,this.a=Za(),this.d=q(this.b),this.d.scale(window.devicePixelRatio,window.devicePixelRatio),this.e=a.getBoundingClientRect().width,this.h=new Ab((this.e/2|0)-(this.a.width/4|0)|0,
(this.e/2|0)-(this.a.height/4|0)|0),s(this.g,this.b),s(this.g,this.c),this.f=new yb(this.b),this.g.a.push(this.f),_a(this)}function Mb(a,b,c){var f=this;f.a=f.b=f.c=f.d=null,f.e=12,f.g=[],f.h=[],f.f=null,f.i=new xb,f.a=a,f.b=b,f.d=c,f.c=q(f.a),f.c.scale(window.devicePixelRatio,window.devicePixelRatio);for(var d=f.a.getBoundingClientRect(),e=1,i=f.e;e<i;e=e+1|0)f.g.push(new zb(new Ab(Math.random()*d.width,Math.random()*d.height))),f.g[f.g.length-1|0].c=$a[e%$a.length|0],f.h.push(15+Math.random()*8);f.f=new zb(new Ab(Math.random()*d.width,Math.random()*d.height)),f.f.c=n(16771345),s(f.i,f.a),s(f.i,f.b),f.i.a.push(new ub(function(g){f.f.a=k(g)},null,null)),f.i.a.push(new ub(null,function(h){f.f.a=k(h)},null)),ab(f)}function Nb(a,b,c){var i=this;i.b=i.c=0,i.d=i.e=i.g=null,i.h=0,i.a=a,q(i.a).scale(window.devicePixelRatio,window.devicePixelRatio),i.c=b,i.b=c,i.e=new Pb(new Ob(0,0),0),da(a,function(d){fb(i,d)}),i.d=new xb,s(i.d,a);var e=function(g){var h=la(k(g),O(i));i.e.a=new Ob((h.a|0)-1|0,h.b|0)};i.d.a.push(new ub(e,
null,null)),i.d.a.push(new ub(null,function(f){new vb(va.a.a).a&&e(f)},null))}function Qb(a){this.a=null,this.b=[],this.c=null,this.d=new Ab(0,0),this.e=new Ab(0,0),this.g=new Ab(0,0),this.a=a;var b=this.a.a.getBoundingClientRect(),c=new Ab(b.width,b.height);this.e=new Ab(c.a/2,c.b/2),this.d=ia(this.e),this.d.b-=50;for(var d=0;d<20;d=d+1|0)for(var e=rb(d,d),g=0;g<10;g++){var h=e*Math.cos(g/10*3.141592653589793*2),f=e*Math.sin(g/10*3.141592653589793*2);h+=Math.random()*30-15,f+=Math.random()*30-15,this.b.push(new Ab(h,f))}sa(this)}ca=Qb.prototype;ca.wa=function(a){this.g=k(a);var b=k(a);this.c=y(o(this.d,b))<y(o(this.e,b))?new Rb(1):new Rb(0),R(a),ta(this,a)};ca.xa=function(a){this.g=k(a),this.c?ta(this,a):ba(this),R(a)};ca.ya=function(a){ua(this.a,k(a)),this.c=null,this.g=k(a),ba(this),R(a)};function Sb(a,b,c){this.a=this.b=this.c=this.d=this.e=this.g=this.h=this.f=null,this.i=new xb,this.a=a,this.b=b,s(this.i,this.a),s(this.i,this.b),this.f=c,this.c=q(this.a),this.c.scale(window.devicePixelRatio,window.devicePixelRatio),
this.d=document.createElement('canvas'),this.e=q(this.d),this.d.width=this.a.width,this.d.height=this.a.height,this.g=document.getElementById('eye');var d=document.createElement('canvas');d.width=this.d.width,d.height=this.d.height,q(d).drawImage(this.g,0,0,this.g.naturalWidth,this.g.naturalHeight,0,0,d.width,d.height),this.h=this.e.createPattern(d,'repeat'),this.i.a.push(new Qb(this))}function Cb(a,b,c){if(this.a=this.b=null,this.c=P(null),this.d=P(null),this.a=a,this.b=this.a.createProgram(),this.a.attachShader(this.b,ma(this,35633,b)),this.a.attachShader(this.b,ma(this,35632,c)),this.a.linkProgram(this.b),!this.a.getProgramParameter(this.b,35714))throw new Error(this.a.getProgramInfoLog(this.b))}function Db(a){this.b=null,this.c=0,this.d=-1,this.a=a,this.b=this.a.createBuffer(),this.c=34962}function Eb(a,b){this.a=a,this.b=b}function Fb(a,b,c,d,e){this.a=a,this.b=b,this.c=c,this.d=d,this.e=e}function Gb(a,b){this.b=this.c=null,this.a=a,this.b=La(b),this.c=this.a.createTexture(),this.a.bindTexture(3553,this.c),
this.a.texParameteri(3553,10242,this.b.c),this.a.texParameteri(3553,10243,this.b.c),this.a.texParameteri(3553,10241,this.b.d),this.a.texParameteri(3553,10240,this.b.d)}function Ib(){this.a=!1,this.b=-1}function Ob(a,b){this.a=a,this.b=b}function Pb(a,b){this.a=a,this.b=b}function Rb(a){this.a=a}var va=new wb,$a=[n(7051762),n(4814543),n(8428277),n(8305894),n(9011445),n(970239),n(5611513)],nb=n(3355443),ob=n(10066329),Ba=n(10855845),pb=n(9391359),qb=new Float32Array([-1,-1,1,-1,-1,1,1,1]);Jb()})();
